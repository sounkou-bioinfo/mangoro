<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R/Go IPC using Nanomsg Next Gen • mangoro</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R/Go IPC using Nanomsg Next Gen">
<meta name="description" content="The tools provide an interface for inter-process communication (IPC) between R and Go using the Nanomsg library. It vendors on the Go side the mangos library &lt;https://github.com/nanomsg/mangos&gt; and arrow-go &lt;https://github.com/apache/arrow-go&gt; and uses nanonext and nanoarrow on the R side.">
<meta property="og:description" content="The tools provide an interface for inter-process communication (IPC) between R and Go using the Nanomsg library. It vendors on the Go side the mangos library &lt;https://github.com/nanomsg/mangos&gt; and arrow-go &lt;https://github.com/apache/arrow-go&gt; and uses nanonext and nanoarrow on the R side.">
<meta property="og:image" content="https://sounkou-bioinfo.github.io/mangoro/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mangoro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.6.90000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sounkou-bioinfo/mangoro/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="mangoro-">mangoro 
<a class="anchor" aria-label="anchor" href="#mangoro-"></a>
</h1>
</div>
<p>R/Go IPC with Nanomsg Next Gen.</p>
<div class="section level2">
<h2 id="what-is-mangoro">What is mangoro?<a class="anchor" aria-label="anchor" href="#what-is-mangoro"></a>
</h2>
<p>Beside being the way mangos is said in <a href="https://bm.wikipedia.org/wiki/Mangoro" class="external-link">bambara</a> (derived from portugese as it happens), in this package we vendor the <a href="https://github.com/nanomsg/mangos" class="external-link">mangos/v3</a> and <a href="https://github.com/apache/arrow-go" class="external-link">arrow-go</a> Go packages for IPC between R and Go processes using the <code>nanonext</code> and <code>nanoarrow</code> R packages on the R side. The package provides helper functions to build Go binaries that use mangos and Arrow for IPC. This is a basic setup that can be used as a starting point for more complex R/Go IPC applications. In our opinion, this approach avoids the complexities and limitations of cgo’s c-shared mode, which can lead to issues with loading multiple Go runtimes in the same R session as discussed in this R-package-devel mailing list thread: <a href="https://hypatia.math.ethz.ch/pipermail/r-package-devel/2025q4/012067.html" class="external-link">CRAN Policy on Go using Packages</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># via r-universe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'mangoro'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://sounkou-bioinfo.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># For CRAN release </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'mangoro'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="on-the-fly-go-compilation-and-echo">On-the-fly Go compilation and echo<a class="anchor" aria-label="anchor" href="#on-the-fly-go-compilation-and-echo"></a>
</h2>
<p>Compile some go code on-the-fly from R using the <code><a href="reference/mangoro_go_build.html">mangoro_go_build()</a></code> function. This uses the vendored go code in <a href="inst/go/vendor">inst/go/vendor</a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nanonext.r-lib.org" class="external-link">nanonext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://processx.r-lib.org" class="external-link">processx</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/" class="external-link">nanoarrow</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sounkou-bioinfo/mangoro" class="external-link">mangoro</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># vendored mangos version</span></span>
<span><span class="fu"><a href="reference/get_mangos_version.html">get_mangos_version</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "v3.4.3-0.20250905144305-2c434adf4860"</span></span>
<span><span class="va">go_echo_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="st">'package main'</span>,</span>
<span>  <span class="st">'import ('</span>,</span>
<span>  <span class="st">'  "os"'</span>,</span>
<span>  <span class="st">'  "go.nanomsg.org/mangos/v3/protocol/rep"'</span>,</span>
<span>  <span class="st">'  _ "go.nanomsg.org/mangos/v3/transport/ipc"'</span>,</span>
<span>  <span class="st">')'</span>,</span>
<span>  <span class="st">'func main() {'</span>,</span>
<span>  <span class="st">'  url := os.Args[1]'</span>,</span>
<span>  <span class="st">'  sock, _ := rep.NewSocket()'</span>,</span>
<span>  <span class="st">'  sock.Listen(url)'</span>,</span>
<span>  <span class="st">'  for {'</span>,</span>
<span>  <span class="st">'    msg, _ := sock.Recv()'</span>,</span>
<span>  <span class="st">'    newMsg := append(msg, []byte(" [echoed by Go]")...)'</span>,</span>
<span>  <span class="st">'    sock.Send(newMsg)'</span>,</span>
<span>  <span class="st">'  }'</span>,</span>
<span>  <span class="st">'}'</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_go</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".go"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">go_echo_code</span>, <span class="va">tmp_go</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">tmp_go</span>, <span class="va">tmp_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=1 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpltOvDA/file1b4f215399dd0' '/tmp/RtmpltOvDA/file1b4f269996acc.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpltOvDA/file1b4f215399dd0"</span></span></code></pre></div>
<p>create IPC path and send/receive message</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">tmp_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="st">"hello from R"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">max_attempts</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">msg</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">send_result</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">msg</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">response</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="va">response</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "hello from R [echoed by Go]"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="arrow-ipc-with-nanoarrow-for-serialization">Arrow IPC with nanoarrow for serialization<a class="anchor" aria-label="anchor" href="#arrow-ipc-with-nanoarrow-for-serialization"></a>
</h2>
<p>Compile go code this time that uses Arrow IPC for (de)serialization between R and Go.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/serial_config.html" class="external-link">serial_config</a></span><span class="op">(</span></span>
<span>  <span class="st">"ArrowTabular"</span>,</span>
<span>  <span class="fu">nanoarrow</span><span class="fu">::</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">write_nanoarrow</a></span>,</span>
<span>  <span class="fu">nanoarrow</span><span class="fu">::</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span></span>
<span><span class="op">)</span></span>
<span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">go_code</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">package main</span></span>
<span><span class="st">import (</span></span>
<span><span class="st">  "os"</span></span>
<span><span class="st">  "bytes"</span></span>
<span><span class="st">  "fmt"</span></span>
<span><span class="st">  "go.nanomsg.org/mangos/v3/protocol/rep"</span></span>
<span><span class="st">  _ "go.nanomsg.org/mangos/v3/transport/ipc"</span></span>
<span><span class="st">  "github.com/apache/arrow/go/v18/arrow/ipc"</span></span>
<span><span class="st">  "github.com/apache/arrow/go/v18/arrow/memory"</span></span>
<span><span class="st">)</span></span>
<span><span class="st">func main() {</span></span>
<span><span class="st">  url := os.Args[1]</span></span>
<span><span class="st">  sock, _ := rep.NewSocket()</span></span>
<span><span class="st">  sock.Listen(url)</span></span>
<span><span class="st">  for {</span></span>
<span><span class="st">    msg, _ := sock.Recv()</span></span>
<span><span class="st">    reader, err := ipc.NewReader(bytes.NewReader(msg), ipc.WithAllocator(memory.DefaultAllocator))</span></span>
<span><span class="st">    if err != nil {</span></span>
<span><span class="st">      fmt.Println("Arrow IPC error:", err)</span></span>
<span><span class="st">      continue</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    var buf bytes.Buffer</span></span>
<span><span class="st">    writer := ipc.NewWriter(&amp;buf, ipc.WithSchema(reader.Schema()))</span></span>
<span><span class="st">    for reader.Next() {</span></span>
<span><span class="st">      rec := reader.Record()</span></span>
<span><span class="st">      fmt.Println(rec)</span></span>
<span><span class="st">      if err := writer.Write(rec); err != nil {</span></span>
<span><span class="st">        fmt.Println("Arrow IPC write error:", err)</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">      rec.Release()</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    if err := writer.Close(); err != nil {</span></span>
<span><span class="st">      fmt.Println("Arrow IPC writer close error:", err)</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    reader.Release()</span></span>
<span><span class="st">    sock.Send(buf.Bytes())</span></span>
<span><span class="st">  }</span></span>
<span><span class="st">}</span></span>
<span><span class="st">'</span></span>
<span><span class="va">tmp_go</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".go"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">go_code</span>, <span class="va">tmp_go</span><span class="op">)</span></span>
<span><span class="va">tmp_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">tmp_go</span>, <span class="va">tmp_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=1 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpltOvDA/file1b4f2526beb89' '/tmp/RtmpltOvDA/file1b4f237647172.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpltOvDA/file1b4f2526beb89"</span></span>
<span></span>
<span><span class="va">echo_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">tmp_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span>, stdout <span class="op">=</span> <span class="st">"|"</span>, stderr <span class="op">=</span> <span class="st">"|"</span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>Configure the socket and send/receive an Arrow IPC data. Note that we use a loop with retries to handle potential timing issues when the Go echo server is not yet ready to receive messages.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/opt.html" class="external-link">opt</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"serial"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">cfg</span></span>
<span></span>
<span><span class="va">example_stream</span> <span class="op">&lt;-</span> <span class="fu">nanoarrow</span><span class="fu">::</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/example_ipc_stream.html" class="external-link">example_ipc_stream</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">max_attempts</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">example_stream</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">send_result</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">example_stream</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="va">send_result</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">received</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"serial"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: received data could not be unserialized</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">received</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">received</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"serial"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sent_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span><span class="op">(</span><span class="va">example_stream</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">received_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span><span class="op">(</span><span class="va">received</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sent_df</span></span>
<span><span class="co">#&gt;   some_col</span></span>
<span><span class="co">#&gt; 1        0</span></span>
<span><span class="co">#&gt; 2        1</span></span>
<span><span class="co">#&gt; 3        2</span></span>
<span><span class="va">received_df</span></span>
<span><span class="co">#&gt;   some_col</span></span>
<span><span class="co">#&gt; 1        0</span></span>
<span><span class="co">#&gt; 2        1</span></span>
<span><span class="co">#&gt; 3        2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">sent_df</span>, <span class="va">received_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simple-rpc-with-function-registration">Simple RPC with Function Registration<a class="anchor" aria-label="anchor" href="#simple-rpc-with-function-registration"></a>
</h2>
<p>The package includes <code>rgoipc</code>, a Go package for building RPC servers with function registration. Functions are registered in the Go main application and called by R.</p>
<div class="section level3">
<h3 id="rpc-message-structure">RPC Message Structure<a class="anchor" aria-label="anchor" href="#rpc-message-structure"></a>
</h3>
<p>The RPC protocol wraps Arrow IPC data in a simple envelope:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>[type<span class="sc">:</span><span class="dv">1</span>byte][name_len<span class="sc">:</span><span class="dv">4</span>bytes][name][error_len<span class="sc">:</span><span class="dv">4</span>bytes][error][arrow_ipc_data]</span></code></pre></div>
<ul>
<li>
<strong>Type</strong>: Message type (0=manifest, 1=call, 2=result, 3=error)</li>
<li>
<strong>Name length + Name</strong>: Function name (empty for manifest requests)</li>
<li>
<strong>Error length + Error</strong>: Error message (empty on success)</li>
<li>
<strong>Arrow IPC data</strong>:
<ul>
<li>For <strong>manifest response</strong>: JSON bytes describing available functions</li>
<li>For <strong>function calls</strong>: Arrow IPC stream containing input arguments (typically RecordBatch)</li>
<li>For <strong>function results</strong>: Arrow IPC stream containing output (typically RecordBatch)</li>
</ul>
</li>
</ul>
<p>Both the input and output data are serialized using Arrow IPC format. The Go server receives Arrow IPC (as <code>arrow.Record</code>), processes it, and returns Arrow IPC. On the R side, you can work with data frames, nanoarrow streams, or any Arrow-compatible structure. The thin RPC envelope only adds metadata (function name, error handling) around the Arrow data.</p>
<p><strong>Key concept</strong>: R data.frames naturally map to Arrow RecordBatch (tabular data with multiple columns). Each column in a data.frame becomes an Arrow Array. Functions receive and return <code>arrow.Record</code> objects, which represent this tabular structure.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">rpc_server_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"go"</span>, package <span class="op">=</span> <span class="st">"mangoro"</span><span class="op">)</span>, <span class="st">"cmd"</span>, <span class="st">"rpc-example"</span>, <span class="st">"main.go"</span><span class="op">)</span></span>
<span><span class="va">rpc_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">rpc_server_path</span>, <span class="va">rpc_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=1 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpltOvDA/file1b4f26e47e3ca' '/usr/local/lib/R/site-library/mangoro/go/cmd/rpc-example/main.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpltOvDA/file1b4f26e47e3ca"</span></span>
<span></span>
<span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">rpc_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">rpc_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span>, stdout <span class="op">=</span> <span class="st">"|"</span>, stderr <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">rpc_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Request the manifest of registered functions:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="va">manifest</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_rpc_get_manifest.html">mangoro_rpc_get_manifest</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">manifest</span></span>
<span><span class="co">#&gt; $add</span></span>
<span><span class="co">#&gt; $add$Args</span></span>
<span><span class="co">#&gt;   Name Type.Type Type.Nullable Type.StructDef Type.ListSchema Optional Default</span></span>
<span><span class="co">#&gt; 1    x   float64          TRUE             NA              NA    FALSE      NA</span></span>
<span><span class="co">#&gt; 2    y   float64          TRUE             NA              NA    FALSE      NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$ReturnType</span></span>
<span><span class="co">#&gt; $add$ReturnType$Type</span></span>
<span><span class="co">#&gt; [1] "float64"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$ReturnType$Nullable</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$ReturnType$StructDef</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$ReturnType$ListSchema</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$Vectorized</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $add$Metadata</span></span>
<span><span class="co">#&gt; $add$Metadata$description</span></span>
<span><span class="co">#&gt; [1] "Add two numeric vectors"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString</span></span>
<span><span class="co">#&gt; $echoString$Args</span></span>
<span><span class="co">#&gt;   Name Type.Type Type.Nullable Type.StructDef Type.ListSchema Optional Default</span></span>
<span><span class="co">#&gt; 1    s    string          TRUE             NA              NA    FALSE      NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$ReturnType</span></span>
<span><span class="co">#&gt; $echoString$ReturnType$Type</span></span>
<span><span class="co">#&gt; [1] "string"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$ReturnType$Nullable</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$ReturnType$StructDef</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$ReturnType$ListSchema</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$Vectorized</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoString$Metadata</span></span>
<span><span class="co">#&gt; $echoString$Metadata$description</span></span>
<span><span class="co">#&gt; [1] "Echo back a string vector"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct</span></span>
<span><span class="co">#&gt; $echoStruct$Args</span></span>
<span><span class="co">#&gt;     Name Type.Type Type.Nullable</span></span>
<span><span class="co">#&gt; 1 person    struct         FALSE</span></span>
<span><span class="co">#&gt;                                                      Type.Fields</span></span>
<span><span class="co">#&gt; 1 name, age, string, int32, FALSE, FALSE, NA, NA, NA, NA, NA, NA</span></span>
<span><span class="co">#&gt;   Type.ListSchema Optional Default</span></span>
<span><span class="co">#&gt; 1              NA    FALSE      NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType</span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType$Type</span></span>
<span><span class="co">#&gt; [1] "struct"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType$Nullable</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType$StructDef</span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType$StructDef$Fields</span></span>
<span><span class="co">#&gt;   Name Type.Type Type.Nullable Type.StructDef Type.ListSchema Metadata</span></span>
<span><span class="co">#&gt; 1 name    string         FALSE             NA              NA       NA</span></span>
<span><span class="co">#&gt; 2  age     int32         FALSE             NA              NA       NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$ReturnType$ListSchema</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$Vectorized</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $echoStruct$Metadata</span></span>
<span><span class="co">#&gt; $echoStruct$Metadata$description</span></span>
<span><span class="co">#&gt; [1] "Echo back a struct column (nested data)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix</span></span>
<span><span class="co">#&gt; $transposeMatrix$Args</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType</span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType$Type</span></span>
<span><span class="co">#&gt; [1] "struct"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType$Nullable</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType$StructDef</span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType$StructDef$Fields</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$ReturnType$ListSchema</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$Vectorized</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $transposeMatrix$Metadata</span></span>
<span><span class="co">#&gt; $transposeMatrix$Metadata$description</span></span>
<span><span class="co">#&gt; [1] "Transpose a matrix (columns &lt;-&gt; rows)"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span></code></pre></div>
<p>Call the <code>add</code> function with Arrow IPC data:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span></span>
<span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">3.5</span>, <span class="cn">NA</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">4.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_rpc_call.html">mangoro_rpc_call</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"add"</span>, <span class="va">input_df</span><span class="op">)</span></span>
<span><span class="va">result_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="va">input_df</span></span>
<span><span class="co">#&gt;     x   y</span></span>
<span><span class="co">#&gt; 1 1.5 0.5</span></span>
<span><span class="co">#&gt; 2 2.5 1.5</span></span>
<span><span class="co">#&gt; 3 3.5 2.5</span></span>
<span><span class="co">#&gt; 4  NA 4.5</span></span>
<span><span class="va">result_df</span></span>
<span><span class="co">#&gt;   result</span></span>
<span><span class="co">#&gt; 1      2</span></span>
<span><span class="co">#&gt; 2      4</span></span>
<span><span class="co">#&gt; 3      6</span></span>
<span><span class="co">#&gt; 4     NA</span></span>
<span><span class="va">input_df</span><span class="op">$</span><span class="va">x</span> <span class="op">+</span> <span class="va">input_df</span><span class="op">$</span><span class="va">y</span></span>
<span><span class="co">#&gt; [1]  2  4  6 NA</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span></code></pre></div>
<p>Call the <code>echoString</code> function to test string handling:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span></span>
<span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>s <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="st">"world"</span>, <span class="cn">NA</span>, <span class="st">"mangoro"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_rpc_call.html">mangoro_rpc_call</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"echoString"</span>, <span class="va">input_df</span><span class="op">)</span></span>
<span><span class="va">result_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="va">input_df</span></span>
<span><span class="co">#&gt;         s</span></span>
<span><span class="co">#&gt; 1   hello</span></span>
<span><span class="co">#&gt; 2   world</span></span>
<span><span class="co">#&gt; 3    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 mangoro</span></span>
<span><span class="va">result_df</span></span>
<span><span class="co">#&gt;    result</span></span>
<span><span class="co">#&gt; 1   hello</span></span>
<span><span class="co">#&gt; 2   world</span></span>
<span><span class="co">#&gt; 3    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 mangoro</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">input_df</span><span class="op">$</span><span class="va">s</span>, <span class="va">result_df</span><span class="op">$</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span></code></pre></div>
<p>Call the <code>transposeMatrix</code> function to demonstrate matrix handling. In R, we send a matrix as a data.frame (each column is a column), and Go transposes it:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a 3x4 matrix and convert to data.frame for Arrow IPC</span></span>
<span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="st">"Input matrix (3x4):"</span></span>
<span><span class="co">#&gt; [1] "Input matrix (3x4):"</span></span>
<span><span class="va">mat</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,]    1    4    7   10</span></span>
<span><span class="co">#&gt; [2,]    2    5    8   11</span></span>
<span><span class="co">#&gt; [3,]    3    6    9   12</span></span>
<span></span>
<span><span class="co"># Convert to data.frame - each column becomes a column</span></span>
<span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">input_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"V"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transpose via RPC</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_rpc_call.html">mangoro_rpc_call</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"transposeMatrix"</span>, <span class="va">input_df</span><span class="op">)</span></span>
<span><span class="va">result_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare values (ignore dimnames)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">result_df</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span></code></pre></div>
<p>Call the <code>echoStruct</code> function to demonstrate nested/struct column handling</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a struct column: a single column named 'person' </span></span>
<span><span class="co"># where each element is a struct with 'name' and 'age' fields</span></span>
<span><span class="va">person_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30L</span>, <span class="fl">25L</span>, <span class="fl">35L</span><span class="op">)</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Wrap in a data frame with I() to create a nested structure</span></span>
<span><span class="co"># I() preserves person_df as a single nested column (Arrow struct type)</span></span>
<span><span class="co"># Without I(), R would flatten it into person.name and person.age columns</span></span>
<span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>person <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">person_df</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call the RPC function</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_rpc_call.html">mangoro_rpc_call</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"echoStruct"</span>, <span class="va">input_df</span><span class="op">)</span></span>
<span><span class="va">result_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">input_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    3 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;  $ person:Classes 'AsIs' and 'data.frame':   3 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ name: chr  "Alice" "Bob" "Charlie"</span></span>
<span><span class="co">#&gt;   ..$ age : int  30 25 35</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">result_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    3 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;  $ person:'data.frame':  3 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ name: chr  "Alice" "Bob" "Charlie"</span></span>
<span><span class="co">#&gt;   ..$ age : int  30 25 35</span></span>
<span></span>
<span><span class="va">result_df</span></span>
<span><span class="co">#&gt;   person.name person.age</span></span>
<span><span class="co">#&gt; 1       Alice         30</span></span>
<span><span class="co">#&gt; 2         Bob         25</span></span>
<span><span class="co">#&gt; 3     Charlie         35</span></span>
<span></span>
<span><span class="co"># Nested data roundtrip successful (AsIs class not preserved)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">input_df</span><span class="op">$</span><span class="va">person</span>, <span class="va">result_df</span><span class="op">$</span><span class="va">person</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">rpc_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="https-file-server-with-rpc-control">HTTP(S) File Server with RPC Control<a class="anchor" aria-label="anchor" href="#https-file-server-with-rpc-control"></a>
</h2>
<p>The package includes an HTTP file server that can be controlled via RPC, demonstrating a slighly more complex use case.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build the HTTP server controller</span></span>
<span><span class="va">http_server_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"go"</span>, package <span class="op">=</span> <span class="st">"mangoro"</span><span class="op">)</span>, <span class="st">"cmd"</span>, <span class="st">"http-server"</span>, <span class="st">"main.go"</span><span class="op">)</span></span>
<span><span class="va">http_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">http_server_path</span>, <span class="va">http_bin</span>, gomaxprocs <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=4 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpltOvDA/file1b4f26692345' '/usr/local/lib/R/site-library/mangoro/go/cmd/http-server/main.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpltOvDA/file1b4f26692345"</span></span>
<span></span>
<span><span class="co"># Start the RPC controller (not the HTTP server itself yet)</span></span>
<span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">http_ctl_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">http_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span>, stdout <span class="op">=</span> <span class="st">"|"</span>, stderr <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">http_ctl_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">http_ctl_proc</span><span class="op">$</span><span class="fu">read_output_lines</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Registered functions: [startServer stopServer serverStatus]"                            </span></span>
<span><span class="co">#&gt; [2] "HTTP server controller listening on ipc:///tmp/RtmpltOvDA/mangoro-echo1b4f2239cbece.ipc"</span></span></code></pre></div>
<p>Control the HTTP server via RPC:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get server status (should be stopped initially)</span></span>
<span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_status.html">mangoro_http_status</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">status</span></span>
<span><span class="co">#&gt;   status message</span></span>
<span><span class="co">#&gt; 1 status stopped</span></span>
<span></span>
<span><span class="co"># Start HTTP server on port 8080 serving current directory</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_start.html">mangoro_http_start</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"127.0.0.1:8080"</span>, dir <span class="op">=</span> <span class="st">"."</span>, cors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;   status                               message</span></span>
<span><span class="co">#&gt; 1     ok HTTP server started on 127.0.0.1:8080</span></span>
<span></span>
<span><span class="co"># Check status again</span></span>
<span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_status.html">mangoro_http_status</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">status</span></span>
<span><span class="co">#&gt;   status                   message</span></span>
<span><span class="co">#&gt; 1 status running at 127.0.0.1:8080</span></span>
<span></span>
<span><span class="co"># Test accessing the HTTP server</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"http://127.0.0.1:8080/"</span>, n <span class="op">=</span> <span class="fl">3</span>, warn <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "&lt;pre&gt;"                                      </span></span>
<span><span class="co">#&gt; [2] "&lt;a href=\".Rbuildignore\"&gt;.Rbuildignore&lt;/a&gt;"</span></span>
<span><span class="co">#&gt; [3] "&lt;a href=\".certs_test/\"&gt;.certs_test/&lt;/a&gt;"</span></span>
<span></span>
<span><span class="co"># Stop the server</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_stop.html">mangoro_http_stop</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;   status             message</span></span>
<span><span class="co">#&gt; 1     ok HTTP server stopped</span></span>
<span></span>
<span><span class="co"># Verify it stopped</span></span>
<span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_status.html">mangoro_http_status</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">status</span></span>
<span><span class="co">#&gt;   status message</span></span>
<span><span class="co">#&gt; 1 status stopped</span></span>
<span></span>
<span><span class="co"># Verify it stopped</span></span>
<span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_status.html">mangoro_http_status</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">status</span></span>
<span><span class="co">#&gt;   status message</span></span>
<span><span class="co">#&gt; 1 status stopped</span></span></code></pre></div>
<div class="section level3">
<h3 id="httpstls-support">HTTPS/TLS Support<a class="anchor" aria-label="anchor" href="#httpstls-support"></a>
</h3>
<p>The HTTP server supports HTTPS with TLS certificates. Start an HTTPS server by providing certificate and key files:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start HTTPS server with certificates (reusing the existing server controller)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_start.html">mangoro_http_start</a></span><span class="op">(</span></span>
<span>  <span class="va">sock</span>,</span>
<span>  addr <span class="op">=</span> <span class="st">"127.0.0.1:8443"</span>,</span>
<span>  dir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  tls <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cert <span class="op">=</span> <span class="st">".certs_test/cert.pem"</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="st">".certs_test/key.pem"</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  cors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;   status                               message</span></span>
<span><span class="co">#&gt; 1     ok HTTP server started on 127.0.0.1:8443</span></span>
<span></span>
<span><span class="co"># Check status</span></span>
<span><span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_status.html">mangoro_http_status</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">status</span></span>
<span><span class="co">#&gt;   status                   message</span></span>
<span><span class="co">#&gt; 1 status running at 127.0.0.1:8443</span></span>
<span></span>
<span><span class="co"># Download a file from HTTPS server using R's download.file</span></span>
<span><span class="va">temp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="st">"https://127.0.0.1:8443/.Rbuildignore"</span>, </span>
<span>              destfile <span class="op">=</span> <span class="va">temp_file</span>,</span>
<span>              method <span class="op">=</span> <span class="st">"curl"</span>,</span>
<span>              extra <span class="op">=</span> <span class="st">"-k"</span>,</span>
<span>              quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Read the downloaded file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">temp_file</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "LICENSE"            "^\\.certs_test/.*$" "^misc/.*$"</span></span>
<span><span class="co"># Stop the HTTPS server</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mangoro_http_stop.html">mangoro_http_stop</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;   status             message</span></span>
<span><span class="co">#&gt; 1     ok HTTP server stopped</span></span>
<span><span class="va">http_ctl_proc</span><span class="op">$</span><span class="fu">read_output_lines</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "[mangoro server] 2025/11/21 20:54:48 Starting HTTP server on 127.0.0.1:8080 serving /home/sounkoutoure/Projects/mangoro at /" </span></span>
<span><span class="co">#&gt; [2] "[mangoro server] 2025/11/21 20:54:50 GET / 127.0.0.1:58146 365.181µs"                                                         </span></span>
<span><span class="co">#&gt; [3] "[mangoro server] 2025/11/21 20:54:50 HTTP server stopped"                                                                     </span></span>
<span><span class="co">#&gt; [4] "[mangoro server] 2025/11/21 20:54:53 Starting HTTPS server on 127.0.0.1:8443 serving /home/sounkoutoure/Projects/mangoro at /"</span></span>
<span><span class="co">#&gt; [5] "[mangoro server] 2025/11/21 20:54:55 GET /.Rbuildignore 127.0.0.1:35162 7.39129ms"                                            </span></span>
<span><span class="co">#&gt; [6] "[mangoro server] 2025/11/21 20:54:55 HTTP server stopped"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">http_ctl_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>The <code>rgoipc</code> package provides the interfaces for type-safe function registration with Arrow schema validation. See <a href="inst/go/pkg/rgoipc">inst/go/pkg/rgoipc</a> for the Go package implementation and <a href="inst/go/cmd/rpc-example">inst/go/cmd/rpc-example</a> and <a href="inst/go/cmd/http-server">inst/go/cmd/http-server</a> for complete server examples.</p>
</div>
</div>
<div class="section level2">
<h2 id="some-issues-to-investigate">Some issues to investigate<a class="anchor" aria-label="anchor" href="#some-issues-to-investigate"></a>
</h2>
<p>There is some conversion overhead now when sending data to go processes because we are sending the arrow data as bytes after convertion of the R objects using nanoarrow. Moroever for some reason, we cannot send directly matrices since we have some cryptic <code>arrow</code> package requirement.</p>
</div>
<div class="section level2">
<h2 id="llm-usage-disclosure">LLM Usage Disclosure<a class="anchor" aria-label="anchor" href="#llm-usage-disclosure"></a>
</h2>
<p>Code and documentation in this project have been generated with the assistance of the github Copilot LLM tools. While we have reviewed and edited the generated content, we acknowledge that LLM tools were used in the creation process and accordingly (since these models are trained on GPL code and other commons + proprietary software license is fake anyway) the code is released under GPL-3. So if you use this code in any way, you must comply with the GPL-3 license.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=mangoro" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/sounkou-bioinfo/mangoro/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/sounkou-bioinfo/mangoro/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mangoro</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sounkou Mahamane Toure <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://sounkou-bioinfo.r-universe.dev/mangoro" class="external-link"><img src="https://sounkou-bioinfo.r-universe.dev/mangoro/badges/version" alt="mangoro status badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=mangoro" class="external-link"><img src="https://www.r-pkg.org/badges/version/mangoro" alt="CRAN"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sounkou Mahamane Toure.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
