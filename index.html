<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R/Go IPC using Nanomsg Next Gen • mangoro</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R/Go IPC using Nanomsg Next Gen">
<meta name="description" content="This package provides an interface for inter-process communication (IPC) between R and Go using the Nanomsg library. It vendors on the Go side the mango library &lt;https://github.com/nanomsg/mangos&gt; and arrow-go &lt;https://github.com/apache/arrow-go&gt; and uses nanonext and nanoarrow on the R side.">
<meta property="og:description" content="This package provides an interface for inter-process communication (IPC) between R and Go using the Nanomsg library. It vendors on the Go side the mango library &lt;https://github.com/nanomsg/mangos&gt; and arrow-go &lt;https://github.com/apache/arrow-go&gt; and uses nanonext and nanoarrow on the R side.">
<meta property="og:image" content="https://sounkou-bioinfo.github.io/mangoro/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mangoro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.90000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sounkou-bioinfo/mangoro/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="mangoro">mangoro<a class="anchor" aria-label="anchor" href="#mangoro"></a>
</h1>
</div>
<div style="display: flex; align-items: flex-start;">
<div style="flex: 1;">
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>R<span class="sc">/</span>Go IPC with Nanomsg Next Gen.</span></code></pre></div>
</div>
<div style="flex: 0 0 auto; margin-left: 20px;">
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="sc">&lt;</span>img src<span class="ot">=</span><span class="st">"inst/docs/logo.svg"</span> alt<span class="ot">=</span><span class="st">""</span> width<span class="ot">=</span><span class="st">"180"</span><span class="sc">/</span><span class="er">&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="what-is-mangoro">What is mangoro?<a class="anchor" aria-label="anchor" href="#what-is-mangoro"></a>
</h2>
<p>Beside being the way mangos is said in <a href="https://bm.wikipedia.org/wiki/Mangoro" class="external-link">bambara</a> (derived from portugese as it happens), in this package we vendor the <a href="https://github.com/nanomsg/mangos" class="external-link">mangos/v3</a> and <a href="https://github.com/apache/arrow-go" class="external-link">arrow-go</a> Go packages for IPC between R and Go processes using the <code>nanonext</code> and <code>nanoarrow</code> R packages on the R side. The package provides helper functions to build Go binaries that use mangos and Arrow for IPC. This is a basic setup that can be used as a starting point for more complex R/Go IPC applications. In our opinion, this approach avoids the complexities and limitations of cgo’s c-shared mode, which can lead to issues with loading multiple Go runtimes in the same R session as discussed in this R-package-devel mailing list thread: <a href="https://hypatia.math.ethz.ch/pipermail/r-package-devel/2025q4/012067.html" class="external-link">CRAN Policy on Go using Packages</a>.</p>
</div>
<div class="section level2">
<h2 id="on-the-fly-go-compilation-and-echo">On-the-fly Go compilation and echo<a class="anchor" aria-label="anchor" href="#on-the-fly-go-compilation-and-echo"></a>
</h2>
<p>Compile some go code on-the-fly from R using the <code><a href="reference/mangoro_go_build.html">mangoro_go_build()</a></code> function. This uses the vendored go code in <a href="inst/go/vendor">inst/go/vendor</a></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sounkou-bioinfo/mangoro" class="external-link">mangoro</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nanonext.r-lib.org" class="external-link">nanonext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://processx.r-lib.org" class="external-link">processx</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># vendored mangos version</span></span>
<span><span class="fu"><a href="reference/get_mangos_version.html">get_mangos_version</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "v3.4.3-0.20250905144305-2c434adf4860"</span></span>
<span><span class="va">go_echo_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="st">'package main'</span>,</span>
<span>  <span class="st">'import ('</span>,</span>
<span>  <span class="st">'  "os"'</span>,</span>
<span>  <span class="st">'  "go.nanomsg.org/mangos/v3/protocol/rep"'</span>,</span>
<span>  <span class="st">'  _ "go.nanomsg.org/mangos/v3/transport/ipc"'</span>,</span>
<span>  <span class="st">')'</span>,</span>
<span>  <span class="st">'func main() {'</span>,</span>
<span>  <span class="st">'  url := os.Args[1]'</span>,</span>
<span>  <span class="st">'  sock, _ := rep.NewSocket()'</span>,</span>
<span>  <span class="st">'  sock.Listen(url)'</span>,</span>
<span>  <span class="st">'  for {'</span>,</span>
<span>  <span class="st">'    msg, _ := sock.Recv()'</span>,</span>
<span>  <span class="st">'    newMsg := append(msg, []byte(" [echoed by Go]")...)'</span>,</span>
<span>  <span class="st">'    sock.Send(newMsg)'</span>,</span>
<span>  <span class="st">'  }'</span>,</span>
<span>  <span class="st">'}'</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_go</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".go"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">go_echo_code</span>, <span class="va">tmp_go</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">tmp_go</span>, <span class="va">tmp_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=1 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpIMd8E3/file161eea43785f61' '/tmp/RtmpIMd8E3/file161eea60b342dc.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpIMd8E3/file161eea43785f61"</span></span></code></pre></div>
<p>create IPC path and send/receive message</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ipc_url</span></span>
<span><span class="co">#&gt; [1] "ipc:///tmp/RtmpIMd8E3/mangoro-echo161eea7c2a9082.ipc"</span></span>
<span><span class="va">echo_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">tmp_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="st">"hello from R"</span><span class="op">)</span></span>
<span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">msg</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "hello from R [echoed by Go]"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="arrow-ipc-with-nanoarrow-for-serialization">Arrow IPC with nanoarrow for serialization<a class="anchor" aria-label="anchor" href="#arrow-ipc-with-nanoarrow-for-serialization"></a>
</h2>
<p>Compile go code this time that uses Arrow IPC for (de)serialization between R and Go.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/" class="external-link">nanoarrow</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/serial_config.html" class="external-link">serial_config</a></span><span class="op">(</span></span>
<span>  <span class="st">"ArrowTabular"</span>,</span>
<span>  <span class="fu">nanoarrow</span><span class="fu">::</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">write_nanoarrow</a></span>,</span>
<span>  <span class="fu">nanoarrow</span><span class="fu">::</span><span class="va"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span></span>
<span><span class="op">)</span></span>
<span><span class="va">ipc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_ipc_path.html">create_ipc_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">go_code</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">package main</span></span>
<span><span class="st">import (</span></span>
<span><span class="st">  "os"</span></span>
<span><span class="st">  "bytes"</span></span>
<span><span class="st">  "fmt"</span></span>
<span><span class="st">  "go.nanomsg.org/mangos/v3/protocol/rep"</span></span>
<span><span class="st">  _ "go.nanomsg.org/mangos/v3/transport/ipc"</span></span>
<span><span class="st">  "github.com/apache/arrow/go/v18/arrow/ipc"</span></span>
<span><span class="st">  "github.com/apache/arrow/go/v18/arrow/memory"</span></span>
<span><span class="st">)</span></span>
<span><span class="st">func main() {</span></span>
<span><span class="st">  url := os.Args[1]</span></span>
<span><span class="st">  sock, _ := rep.NewSocket()</span></span>
<span><span class="st">  sock.Listen(url)</span></span>
<span><span class="st">  for {</span></span>
<span><span class="st">    msg, _ := sock.Recv()</span></span>
<span><span class="st">    reader, err := ipc.NewReader(bytes.NewReader(msg), ipc.WithAllocator(memory.DefaultAllocator))</span></span>
<span><span class="st">    if err != nil {</span></span>
<span><span class="st">      fmt.Println("Arrow IPC error:", err)</span></span>
<span><span class="st">      continue</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    var buf bytes.Buffer</span></span>
<span><span class="st">    writer := ipc.NewWriter(&amp;buf, ipc.WithSchema(reader.Schema()))</span></span>
<span><span class="st">    for reader.Next() {</span></span>
<span><span class="st">      rec := reader.Record()</span></span>
<span><span class="st">      fmt.Println(rec)</span></span>
<span><span class="st">      if err := writer.Write(rec); err != nil {</span></span>
<span><span class="st">        fmt.Println("Arrow IPC write error:", err)</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">      rec.Release()</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    if err := writer.Close(); err != nil {</span></span>
<span><span class="st">      fmt.Println("Arrow IPC writer close error:", err)</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    reader.Release()</span></span>
<span><span class="st">    sock.Send(buf.Bytes())</span></span>
<span><span class="st">  }</span></span>
<span><span class="st">}</span></span>
<span><span class="st">'</span></span>
<span><span class="va">tmp_go</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".go"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">go_code</span>, <span class="va">tmp_go</span><span class="op">)</span></span>
<span><span class="va">tmp_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/mangoro_go_build.html">mangoro_go_build</a></span><span class="op">(</span><span class="va">tmp_go</span>, <span class="va">tmp_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GOMAXPROCS=1 /usr/lib/go-1.22/bin/go 'build' '-mod=vendor' '-o' '/tmp/RtmpIMd8E3/file161eea58d162a0' '/tmp/RtmpIMd8E3/file161eea65b1bbe8.go'"</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpIMd8E3/file161eea58d162a0"</span></span>
<span></span>
<span><span class="va">echo_proc</span> <span class="op">&lt;-</span> <span class="fu">processx</span><span class="fu">::</span><span class="va"><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">tmp_bin</span>, args <span class="op">=</span> <span class="va">ipc_url</span>, stdout <span class="op">=</span> <span class="st">"|"</span>, stderr <span class="op">=</span> <span class="st">"|"</span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>Configure the socket and send/receive an Arrow IPC data. Note that we use a loop with retries to handle potential timing issues when the Go echo server is not yet ready to receive messages.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">sock</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/socket.html" class="external-link">socket</a></span><span class="op">(</span><span class="st">"req"</span>, dial <span class="op">=</span> <span class="va">ipc_url</span><span class="op">)</span></span>
<span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/opt.html" class="external-link">opt</a></span><span class="op">(</span><span class="va">sock</span>, <span class="st">"serial"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">cfg</span></span>
<span></span>
<span><span class="va">example_stream</span> <span class="op">&lt;-</span> <span class="fu">nanoarrow</span><span class="fu">::</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/example_ipc_stream.html" class="external-link">example_ipc_stream</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">max_attempts</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">example_stream</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">send_result</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">send_result</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/send.html" class="external-link">send</a></span><span class="op">(</span><span class="va">sock</span>, <span class="va">example_stream</span>, mode <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">send_result</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">received</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"serial"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: received data could not be unserialized</span></span>
<span><span class="va">attempt</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/is_error_value.html" class="external-link">is_error_value</a></span><span class="op">(</span><span class="va">received</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">attempt</span> <span class="op">&lt;</span> <span class="va">max_attempts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">received</span> <span class="op">&lt;-</span> <span class="fu">nanonext</span><span class="fu">::</span><span class="fu"><a href="https://nanonext.r-lib.org/reference/recv.html" class="external-link">recv</a></span><span class="op">(</span><span class="va">sock</span>, mode <span class="op">=</span> <span class="st">"serial"</span><span class="op">)</span></span>
<span>  <span class="va">attempt</span> <span class="op">&lt;-</span> <span class="va">attempt</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sent_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span><span class="op">(</span><span class="va">example_stream</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">received_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://arrow.apache.org/nanoarrow/latest/r/reference/read_nanoarrow.html" class="external-link">read_nanoarrow</a></span><span class="op">(</span><span class="va">received</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sent_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   some_col</span></span>
<span><span class="co">#&gt; 1        0</span></span>
<span><span class="co">#&gt; 2        1</span></span>
<span><span class="co">#&gt; 3        2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">received_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   some_col</span></span>
<span><span class="co">#&gt; 1        0</span></span>
<span><span class="co">#&gt; 2        1</span></span>
<span><span class="co">#&gt; 3        2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">sent_df</span>, <span class="va">received_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">sock</span><span class="op">)</span></span>
<span><span class="va">echo_proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="llm-usage-disclosure">LLM Usage Disclosure<a class="anchor" aria-label="anchor" href="#llm-usage-disclosure"></a>
</h2>
<p>Code and documentation in this project have been generated with the assistance of the github Copilot LLM tools. While we have reviewed and edited the generated content, we acknowledge that LLM tools were used in the creation process and accordingly (since these models are trained on GPL code and other commons + proprietary software license is fake anyway) the code is released under GPL-3. So if you use this code in any way, you must comply with the GPL-3 license.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/sounkou-bioinfo/mangoro/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/sounkou-bioinfo/mangoro/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mangoro</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sounkou Mahamane Toure <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://sounkou-bioinfo.r-universe.dev/mangoro" class="external-link"><img src="https://sounkou-bioinfo.r-universe.dev/mangoro/badges/version" alt="mangoro status badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sounkou Mahamane Toure.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
